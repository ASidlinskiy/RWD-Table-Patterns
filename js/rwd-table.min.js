/*	Scripts for the tables test page 
		Original author: Maggie Wachs, www.filamentgroup.com
		Author of extended script: Nadan Gergeo
		Date: November 2011
		Dependencies: jQuery, jQuery UI widget factory
*/// Prevent dropdown from closing when toggling checkbox
function mediaQueriesSupported(){return typeof window.matchMedia!="undefined"||typeof window.msMatchMedia!="undefined"}function hasTouch(){return"ontouchstart"in window}function updateStickyTableHead(e,t,n){e=$(e);var r=e.find("thead"),i=e.offset().top,s=$(window).scrollTop(),o=e.height()-t.height(),u=s+$(window).height()-$(document).height(),a,f=!1;if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))f=!0;n&&(s+=$(n).height());a=s-i;a-=1;a<0?a=0:a>o&&(a=o);u>0&&(a-=u);if(s>i&&s<i+e.height())if(!f)t.css({visibility:"visible",top:a+"px"});else{t.css({visibility:"visible"});t.animate({top:a+"px"},400);r.css({visibility:"hidden"})}else f?t.animate({top:"0"},400,function(){r.css({visibility:"visible"});t.css({visibility:"hidden"})}):t.css({visibility:"hidden"})}$(document).on("click.dropdown.data-api",".dropdown-menu .checkbox-row",function(e){e.stopPropagation()});$(document).ready(function(){document.documentElement.className=document.documentElement.className.replace("no-js","js");mediaQueriesSupported()?jQuery("html").addClass("mq"):jQuery("html").addClass("no-mq");hasTouch()?jQuery("html").addClass("touch"):jQuery("html").addClass("no-touch")});(function(e){e.widget("filament.table",{options:{checkContainer:null,addAutoButton:!1,addFocusButton:!1,fixedNavbar:null},_create:function(){function S(){u.removeClass("unfocused");u.removeClass("focused")}var t=this,n=t.options,r=t.element,i=r.find("thead"),s=r.find("tbody"),o=i.find("th"),u=s.find("tr"),a=n.checkContainer?e(n.checkContainer):e('<ul class="dropdown-menu"/>'),f="auto-on-"+r.attr("id"),l=r.attr("id")+"-col-";e(r).parent().hasClass("table-scroll-wrapper")===!1&&e(r).wrap('<div class="table-scroll-wrapper"/>');var c=e(r).parent(),h=c.parent(),p=e('<div class="btn-toolbar" />'),d=e('<div class="btn-group dropdown-btn-group pull-right" />'),v=e('<button class="btn btn-default dropdown-toggle" data-toggle="dropdown">Display <span class="caret"></span></button>'),m=e('<div class="btn-group auto-btn-group" />'),g=e('<button class="btn btn-default">Auto</button>'),y=e('<div class="btn-group focus-btn-group" />'),b=e('<button class="btn btn-default"><span class="glyphicon glyphicon-screenshot"></span> Focus</button>');r.hasClass("auto-on")&&g.addClass("btn-primary");y.append(b);m.append(g);d.append(v).append(a);n.addFocusButton&&p.append(y);n.addAutoButton&&p.append(m);p.append(d);h.prepend(p);o.each(function(t){var n=e(this),r=n.attr("id");if(!r){r=l+t;n.attr("id",r)}if(n.is("[data-priority]")){var i=e('<li class="checkbox-row"><input type="checkbox" name="toggle-'+r+'" id="toggle-'+r+'" value="'+r+'" /> <label for="toggle-'+r+'">'+n.text()+"</label></li>");a.append(i);i.click(function(){var e=i.find("input");e.prop("checked",!e.prop("checked"));e.trigger("change")});i.find("label").click(function(e){e.stopPropagation()});i.find("input").click(function(e){e.stopPropagation()}).change(function(){var t=e(this),n=t.val(),r=e(c).find("#"+n+", #"+n+"-clone, [data-columns~="+n+"]");r.each(function(){var n=e(this);if(t.is(":checked")){n.css("display")!=="none"&&n.prop("colSpan",parseInt(n.prop("colSpan"))+1);n.show()}else parseInt(n.prop("colSpan"))>1?n.prop("colSpan",parseInt(n.prop("colSpan"))-1):n.hide()})}).bind("updateCheck",function(){n.css("display")!=="none"?e(this).prop("checked",!0):e(this).prop("checked",!1)}).trigger("updateCheck")}});u.each(function(){var t=0;e(this).find("th, td").each(function(){var n=e(this),r="",i=n.prop("colSpan");i>1&&n.addClass("spn-cell");var s=0;for(var o=t;o<t+i;o++){r=r+" "+l+o;var u=e(c).find("#"+l+o),a=u.attr("class");a&&n.addClass(a);var f=u.attr("data-priority");f&&n.attr("data-priority",f);u.css("display")==="none"&&s++}n.prop("colSpan",Math.max(i-s,1));r=r.substring(1);n.attr("data-columns",r);t+=i})});e(window).bind("orientationchange resize "+f,function(){a.find("input").trigger("updateCheck");e(r).find(".spn-cell").each(function(){var t=e(this),n=t.attr("data-columns");n=n.split(" ");var r=n.length,i=0;for(var s=0;s<r;s++)e("#"+n[s]).css("display")==="none"&&i++;i!==r&&t.show();t.prop("colSpan",Math.max(r-i,1))})});a.children("li").length===0&&a.parent().hide();var w=e(r).clone();e(w).attr("id",r.attr("id")+"-clone");e(w).find("[id]").each(function(){e(this).attr("id",e(this).attr("id")+"-clone")});e(w).wrap('<div class="stickyTableHead"/>');var E=e(w).parent();e(E).css("height",i.height()+2);e(r).before(E);e(window).bind("scroll resize",function(){updateStickyTableHead(r,E,n.fixedNavbar)});g.click(function(){g.toggleClass("btn-primary");r.toggleClass("auto-on");w.toggleClass("auto-on");e(window).trigger(f)});b.click(function(){S();e(this).toggleClass("btn-primary");r.toggleClass("focus-on")});u.click(function(){if(r.hasClass("focus-on")){var t=e(this).hasClass("focused");S();if(!t){u.addClass("unfocused");e(this).addClass("focused")}}})},disable:function(){},enable:function(){}})})(jQuery);